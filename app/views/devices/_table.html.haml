= hidden_field_tag :direction, params[:direction]
= hidden_field_tag :sort, params[:sort]
- if @devices.any?

  %table.table.table-striped.table-hover
    %thead
      %tr
        %th= sortable 'id', Device.human_attribute_name(:id)
        %th= sortable 'ticket_number', Device.human_attribute_name(:ticket_number)
        %th= sortable 'device', Device.human_attribute_name(:device)
        %th= sortable 'client', Device.human_attribute_name(:client_id)
        %th= Device.human_attribute_name(:comment)
        %th= sortable 'created_at', Device.human_attribute_name(:created_at)
        %th= sortable 'done_at', Device.human_attribute_name(:done_at)
        %th=t '.actions', :default => t("helpers.actions")
    %tbody
      - @devices.each do |device|
        %tr{class: row_class_for_device(device)}
          %td= link_to device.id, device_path(device)
          %td= link_to device.ticket_number, device_path(device)
          %td= link_to device.presentation, device_path(device)
          %td= device.client.name_phone
          %td= device.comment
          %td= l device.created_at, format: :long_d
          %td
            - if device.done?
              = l device.done_at, format: :long_d
            - else
              %span.badge{class: "badge-#{device.is_important? ? 'important' : 'info'}"}
                = device.progress
          %td
            .btn-group
              = link_to t('.edit', :default => t("helpers.links.edit")), edit_device_path(device), :class => 'btn btn-mini'
              = link_to t('.destroy', :default => t("helpers.links.destroy")), device_path(device), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-mini btn-danger'
       
  = paginate @devices
  
- else
  = render 'shared/empty'
