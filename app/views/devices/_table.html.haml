= hidden_field_tag :direction, params[:direction]
= hidden_field_tag :sort, params[:sort]
- if @devices.any?

  %table.table.table-striped.table-hover
    %thead
      %tr
        %th= sortable 'id', Device.human_attribute_name(:id)
        %th= sortable 'ticket_number', Device.human_attribute_name(:ticket_number)
        %th= Device.human_attribute_name(:device)
        %th= Device.human_attribute_name(:client_id)
        %th= Device.human_attribute_name(:comment)
        %th= sortable 'created_at', Device.human_attribute_name(:created_at)
        %th= sortable 'done_at', Device.human_attribute_name(:done_at)
        %th
    %tbody
      - @devices.each do |device|
        %tr{class: row_class_for_device(device)}
          %td= link_to device.id, device_path(device)
          %td= link_to device.ticket_number, device_path(device)
          %td
            = link_to device.type_name, device_path(device)
            %small= device.serial_number
          %td= h device.client.name_phone
          %td
            %p.device_comment_tooltip{'data-title' => device.comment}
              %small= h device.comment.truncate(30, separator: ' ')
          %td= l device.created_at, format: :long_d
          %td
            - if device.done? and device.done_at.present?
              = l device.done_at, format: :long_d
            - else
              %span.badge{class: "badge-#{device.is_important? ? 'important' : 'info'}"}
                = device.progress
          %td
            .btn-group
              = link_to_show device
              = link_to_edit device
              = link_to_destroy device
       
  = paginate @devices
  
- else
  = render 'shared/empty'
