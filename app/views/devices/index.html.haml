.page-header
  %h1
    = t '.title', default: Device.model_name.pluralize
  = link_to_new Device if can? :receive, Device
  
.table_filter.navbar.container
  .navbar-inner

    = form_tag devices_path, method: 'get', id: 'search_form', class: 'navbar-search form-search', remote: true do

      = hidden_field_tag :status, params[:status]
      = hidden_field_tag :location, params[:location]

      .input-append
        = text_field_tag :ticket, params[:ticket], id: 'search_ticket_input', class: 'search-query input-medium',
            placeholder: 'ticket number'
        %span.add-on.btn.clear_search_input
          %i.icon-remove
      
      .input-append
        = text_field_tag :device, params[:device], id: 'search_device_input', class: 'search-query input-medium',
            placeholder: 'device serial number'
        %span.add-on.btn.clear_search_input
          %i.icon-remove
    
      .input-append
        = text_field_tag :client, params[:client], id: 'search_client_input', class: 'search-query input-medium',
            placeholder: 'client (name or phone)'
        %span.add-on.btn.clear_search_input
          %i.icon-remove

    %ul.nav
      %li.dropdown
        = link_to '#', class: 'dropdown-toggle', 'data-toggle' => 'dropdown' do
          = t(params[:status] || 'all statuses')
          %b.caret
        %ul.dropdown-menu
          %li= link_to t('all statuses'), devices_path#, remote: true
          %li= link_to t('done'), devices_path(status: 'done')#, remote: true
          %li= link_to t('pending'), devices_path(status: 'pending')#, remote: true
          %li= link_to t('important'), devices_path(status: 'important')#, remote: true

    %ul.nav
      %li.dropdown
        = link_to '#', class: 'dropdown-toggle', 'data-toggle' => 'dropdown' do
          = @location_name || t('everywhere')
          %b.caret
        %ul.dropdown-menu
          %li= link_to t('everywhere'), devices_path#, remote: true
          - Location.find_each do |location|
            %li= link_to location.full_name, devices_path(location: location)#, remote: true

#resource_table= render 'table'
