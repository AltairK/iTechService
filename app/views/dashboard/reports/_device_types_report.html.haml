%ul.breadcrumb
  - if @current_device_type.present?
    %li
      = link_to icon_tag(:home), reports_path(report: 'device_types_report',
                    start_date: @start_date.strftime('%d.%m.%Y'), end_date: @end_date.strftime('%d.%m.%Y'))
      %span.divider /
    - @current_device_type.ancestors.each do |device_type|
      %li
        = link_to device_type.full_name, reports_path(report: 'device_types_report', device_type: device_type.id,
                              start_date: @start_date.strftime('%d.%m.%Y'), end_date: @end_date.strftime('%d.%m.%Y'))
        %span.divider /
    %li.active= @current_device_type.full_name

  - else
    %li.active= icon_tag(:home)

%table#device_types_report.table.table-bordered.table-hover
  %caption
    %h4= t 'reports.device_types_report'
  %thead
    %tr
      %th.center{rowspan: 2}= Device.human_attribute_name :device_type
      %th.center{rowspan: 2}= t('reports.received')
      %th.center{colspan: 2}= t('reports.includes')
    %tr
      %th.center= t('reports.received_done')
      %th.center= t('reports.received_archived')
  %tbody
    - @report[:device_types].each do |device_type|
      %tr
        %td
          - if device_type[:device_type].is_childless?
            = device_type[:device_type].full_name
          - else
            = link_to device_type[:device_type].full_name, reports_path(report: 'device_types_report',
                                device_type: device_type[:device_type].id,
                                start_date: @start_date.strftime('%d.%m.%Y'), end_date: @end_date.strftime('%d.%m.%Y'))
        %td= device_type[:qty]
        %td= device_type[:qty_done]
        %td= device_type[:qty_archived]
  %tfoot
    %tr
      %td= t('reports.total')
      %td= @report[:devices_received_count]
      %td= @report[:devices_received_done_count]
      %td= @report[:devices_received_archived_count]
