#reports_filter.navbar.container
  .navbar-inner
    = form_tag reports_path, method: :get, class: 'navbar-form form-search' do
      %button.btn.btn-info.btn-small
        %i.icon-filter
      = text_field_tag :start_date, @start_date.strftime('%d.%m.%Y'), class: 'datepicker input-small',
          data: {'date-language' => 'ru', 'date-format' => 'dd.mm.yyyy', 'date-weekstart' => 1}
      = '_'
      = text_field_tag :end_date, @end_date.strftime('%d.%m.%Y'), class: 'datepicker input-small',
          data: {'date-language' => 'ru', 'date-format' => 'dd.mm.yyyy', 'date-weekstart' => 1}

#reports_tables
  %table.table.table-bordered.table-hover
    %thead
      %tr
        %th.center{rowspan: 2}= Device.human_attribute_name :device_type
        %th.center{rowspan: 2}= t('reports.received')
        %th.center{colspan: 2}= t('reports.includes')
      %tr
        %th.center= t('reports.received_done')
        %th.center= t('reports.received_archived')
    %tbody
      - @report[:device_types].each do |device_type|
        %tr
          %td= device_type[0]
          %td= device_type[1]
          %td= device_type[2]
          %td= device_type[3]
    %tfoot
      %tr
        %td= t('reports.total')
        %td= @report[:devices_received_count]
        %td= @report[:devices_received_done_count]
        %td= @report[:devices_received_archived_count]

  %table.table.table-bordered.table-hover
    %thead
      %tr
        %th.center{rowspan: 2}= Device.human_attribute_name :user
        %th.center{rowspan: 2}= t('reports.received')
        %th.center{colspan: 2}= t('reports.includes')
      %tr
        %th.center= t('reports.received_done')
        %th.center= t('reports.received_archived')
    %tbody
      %tr
      - @report[:users].each do |user|
        %tr
          %td= user[0]
          %td= user[1]
          %td= user[2]
          %td= user[3]
    %tfoot
      %tr
        %td= t('reports.total')
        %td= @report[:devices_received_count]
        %td= @report[:devices_received_done_count]
        %td= @report[:devices_received_archived_count]

  %table.table.table-bordered.table-hover
    %thead
      %tr
        %th= DeviceTask.human_attribute_name :task
        %th= t('reports.sum')
    %tbody
      %tr
      - @report[:tasks].each do |task|
        %tr
          %td= task[0]
          %td= number_to_currency task[1], unit: '', precision: 0
    %tfoot
      %tr
        %td= t('reports.total')
        %td= number_to_currency @report[:tasks_sum], unit: '', precision: 0
