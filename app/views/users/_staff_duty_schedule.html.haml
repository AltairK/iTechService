- days = calendar_month_days(@calendar_month).in_groups_of(7)
#staff_duty_schedule
  %table.table.table-bordered.table-condensed
    %caption
      %h4
        = t 'user.duty_schedule'
    %thead
      %tr
        %th{colspan: 8}
          %ul.pager
            %li.previous
              = link_to staff_duty_schedule_users_path(date: @calendar_month.prev_month), remote: true do
                &larr;
            %li
              %span= @calendar_month.strftime "%B %Y"
            %li.next
              = link_to staff_duty_schedule_users_path(date: @calendar_month.next_month), remote: true do
                &rarr;

      %tr
        %th
        - t('date.abbr_day_names').each do |day|
          %th
            %strong= day
    %tbody
      - days.each_index do |i|
        %tr
          %td
            %strong= i+1
          - days[i].each do |day|
            %td{duty_day_attributes(day, @calendar_month.month)}
              - if day.today?
                %span.badge.badge-info= day.day
              - else
                %span.badge.badge-blank= day.day

    %tfoot
      -#- upcoming_duties(@user, Date.current).each do |duty_day|
      -#  %tr
      -#    %td{colspan: 2}
      -#      = duty_day.day.strftime '%d.%m.%y'
      -#    %td{colspan: 6}
      -#      = duty_day.user.full_name.blank? ? duty_day.user.username : duty_day.user.full_name
